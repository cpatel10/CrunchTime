<!DOCTYPE html>

<html>
<head>

    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />


    <!-- temporarily moved to head whilst we develop app...-->
    <script type="text/javascript" src="js/index.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/crunchtime.js"></script>
    <script src="cordova.js"></script>
    <script>

      var db = null;

      document.addEventListener('deviceready', function() {
        db = window.sqlitePlugin.openDatabase({name: 'mydb5.db', location: 'default'});
        
        populateDB();
        db.transaction(queryDB, errorCB);
      });
      
      function populateDB() {
        db.transaction(function(tx) {
          tx.executeSql('CREATE TABLE IF NOT EXISTS FoodItem (name, minutes, store, link)');
          tx.executeSql('INSERT INTO FoodItem VALUES (?,?,?,?)', 
            ['Burrito Bowl', 25, 'Chipotle', '../www/img/burritoBowl.jpg']);
          tx.executeSql('INSERT INTO FoodItem VALUES (?,?,?,?)', 
            ['Crispy Corn Tacos', 30, 'Taco Bell', '../www/img/taco.jpg']);
          tx.executeSql('INSERT INTO FoodItem VALUES (?,?,?,?)', 
            ['Quarter Pounder', 15, 'McDonalds', '../www/img/burger.jpg']);
          tx.executeSql('INSERT INTO FoodItem VALUES (?,?,?,?)', 
            ['Salad Bowl', 20, 'You', '../www/img/salad.jpg']);
        }, function(error) {
          alert('Transaction ERROR: ' + error.message);
        }, function() {
          alert('Populated database OK');
        });
      }

      function queryDB(tx) {
        tx.executeSql('SELECT * FROM FoodItem', [], querySuccess, errorCB);
      }

      function errorCB(err) {
        alert("Error processing SQL: "+err.code);
      }

      function querySuccess(tx, results) {

        var foodItemIndexText;
        var len = results.rows.length;
        for (var i = 0; i < len; i++) {
          if (i%2 == 0) {
            var foodItemText = '<div class="ui-block-a">';
          } else {
            var foodItemText = '<div class="ui-block-b">';
          }
          
          foodItemText += '<a href="#"><img src="'
                        + results.rows.item(i).link
                        + '" class="ui-li-thumb"></a><span><p>' 
                        + results.rows.item(i).name 
                        + '<br>by <a href="#">' 
                        + results.rows.item(i).store + '</a></p></span>';
          foodItemText += "</div>";
          foodItemIndexText += foodItemText;
        }
        
        document.getElementById("food-item-list").innerHTML = foodItemIndexText;
      }

      function goSearch() {
            
        db.transaction(searchQueryDB, errorCB);
      }

      function searchQueryDB(tx) {
        tx.executeSql("SELECT * FROM FoodItem where name like ('%"+ document.getElementById("search-basic").value + "%')", [], querySuccess, errorCB);
      }

      $('#searchButton').submit(function(){
        goSearch();
      })

    </script>

    <title>CrunchTime</title>
</head>
<body>

<!-- page1 -->
    <div data-role="page" id="homePage">
        <div id="header" data-role="header" content="ui-content" >
            <h1>CrunchTime</h1>
                 <span data-role="button" class="ui-btn ui-btn-right ui-corner-all ui-icon-bars ui-btn-icon-notext"style= "margin-top: 8px" onclick="menuContentShow()">Bars Icon</span>
                    <ul class= "one" data-role="listview" data-inset="true">
                        <li data-icon="false"><a href="#loginPage" data-rel="popup">Login</a></li>
                        <li data-icon="false"><a href="#signUpPage" data-rel="popup">Register</a></li>
                        <li data-icon="false"><a href="#aboutUsPage">About Us</a></li>
                    </ul>
        </div>




        <div class="tp">
        <div id="time1" content="ui-content">
                <label for="time1">Have these items in </label></div>
                <div id="time1-o">
                <select name="time" id="time" data-inline="true" data-mini="true">
                    <option value="30">30 mins</option>
                    <option value="15">15 mins</option>
                    <option value="45">45 mins</option>
                    <option value="1">1 hour</option>
                    <option value="1.15"> > 1 hour</option>

                </select>
                    </div>
            </div>

            <div class="search">
            <label for="search-basic" class="ui-hidden-accessible" data-mini="true">Search Input:</label>
            
            <input type="search" name="search" id="search-basic" placeholder="search" style="text-align: center" />
                </div>

            <button id="searchButton" onclick="goSearch()">Search</button>

            <div class="advancedSearch"><p><a href="#searchPage">Advanced Search</a></p></div>



        <div data-role="main" content="ui-content">
            <div class="ui-grid-x">
              <div id="food-item-list"></div>   
            </div>
         </div>
<!--Login Popup-->
        <div data-role="popup"  id="loginPage" class="ui-content">
            <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
            <form id ="login" method="post" action="#myPage">
                <h3>Login/ <a href="#signUpPage">Sign Up</a></h3>
                <label for="usrnm" class="ui-hidden-accessible">Username:</label>
                <input type="text" name="user" id="usrnm" placeholder="Username" data-mini="true">
                <label for="pswd" class="ui-hidden-accessible">Password:</label>
                <input type="password" name="pswd" id="pswd" placeholder="Password" data-mini="true">
                <label for="log">Keep me logged in</label>
                <input type="checkbox" name="login" id="log" value="1" data-mini="true"><br>
                <input type="submit" data-inline="true" value="Log in" data-mini="true">
            </form>
        </div>


<!--sign up popup-->
        <div data-role="popup" id="signUpPage">
            <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn ui-icon-delete ui-btn-icon-notext ui-btn-right">Close</a>
            <form id = "signUp" method="post" action="#myPage">
                <h3>Register</h3>
                <label for="firstname" class="ui-hidden-invisible">Name </label>
                <input type="text" name="firstname" id="firstname" placeholder="Name" data-mini="true">
                <label for="email" class="ui-hidden-invisible">Email:</label>
                <input type="text" name="email" id="email" placeholder="Email" data-mini="true">
                <label for=pwd1 class="ui-hidden-invisible">Password: </label>
                <input type="text" name="pwd1" id="pwd1"placeholder="Password" data-mini="true">
                <label for="pwd2" class="ui-hidden-invisible">Confirm Password</label>
                <input type="text" name="pwd2" id="pwd2"  placeholder="Confirm Password" data-mini="true"><br>
                <input type="submit" data-inline="true" value="SignUp" data-mini="true">

            </form>
        </div>

    </div>


<!--myPage after loggin in-->
    <div data-role="page" id="myPage">
        <div id="header1" data-role="header">
            <h1>CrunchTime</h1>
            <span data-role="button" class="ui-btn ui-btn-right ui-corner-all ui-icon-bars ui-btn-icon-notext"style= "margin-top: 8px" onclick="menuContentShow()">Bars Icon</span>
            <ul class= "one" data-role="listview" data-inset="true">
                <li data-icon="false"><a href="#loginPage">Logout</a></li>
                <li data-icon="false"><a href="#homePage">Home</a></li>
                <li data-icon="false"><a href="#aboutUsPage">About Us</a></li>
            </ul>
            </div>
        <h3>Favorites</h3>
        <div class="ui-grid-x">

            <div class = "ui-block-a">
                <a href="#">
                    <img src="../www/img/burritoBowl.jpg" class="ui-li-thumb"></a><br>

                <span>Burrito Bowl<br> by <a href="#" >Chipotle</a></p></span>

            </div>
            <div class="ui-block-b"><a href="#">
                <img src="../www/img/taco.jpg" class="ui-li-thumb"></a>

                <span><p>Crispy Corn Tacos<br>by <a href="#">Taco Bell</a></p></span>

            </div>


            <h3>Previously browsed</h3>

            <div class ="ui-block-a"><a href="#">
                <img src="../www/img/salad.jpg" class="ui-li-thumb"></a><br>

                <span><p>Salad Bowl<br> Prepared by <a href="#">You</a></p></span>

            </div>
            <div class="ui-block-b"><a href="#">
                <img src="../www/img/burger.jpg" class="ui-li-thumb"></a>

                <span><p>Burger<br>by <a href="#">McDonalds</a></p></span>

            </div>
        </div>

        </div>

<!--search page-->
    <div data-role="page" id="searchPage">
        <div id="header2" data-role="header">
        <h1>CrunchTime</h1>
            <span data-role="button" class="ui-btn ui-btn-right ui-corner-all ui-icon-bars ui-btn-icon-notext"style= "margin-top: 8px" onclick="menuContentShow()">Bars Icon</span>
            <ul class= "one" data-role="listview" data-inset="true">
                <li data-icon="false"><a href="#loginPage">Login</a></li>
                <li data-icon="false"><a href="#signUpPage">Register</a></li>
                <li data-icon="false"><a href="#aboutUsPage">About Us</a></li>
            </ul>
        </div><br><br>
        <div data-role="main" content="ui-content">
            <form id="searchForm" method="post" action="#searchResultPage">

            <label>
                <input type="radio" name="radio-choice-0" id="radio-choice-0a" data-mini="true">Vegan
            </label>
            <label for="radio-choice-0b">Vegetarian</label>
            <input type="radio" name="radio-choice-0" id="radio-choice-0b" class="custom" data-mini="true"><br>
            <!--<div data-role="controlgroup" data-type="horizontal" data-mini="true">-->
                <!--<label for="veg">Veg</label>-->
                <!--<input type="checkbox" name="pref" id="veg" value="veg">-->
                <!--<label for="vegan">Vegan</label>-->
                <!--<input type="checkbox" name="pref" id="vegan" value="vegan">-->
            <!--</div><br>-->


                <div class="time2" content="ui-content">
                    <label for="time2">Time Preference</label></div>
                <div class="time2-o">
                    <select name="time2" id="time2" data-inline="true" data-mini="true">
                        <option value="30">30 mins</option>
                        <option value="15">15 mins</option>
                        <option value="45">45 mins</option>
                        <option value="1">1 hour</option>
                        <option value="1.15"> > 1 hour</option>

                    </select>
                </div><br><br>
            <label for="ingredient">Ingredients:</label>
            <input type="textarea" name="ingredient" id="ingredient"><br><br>


                <a href="#searchResultPage"><input type="submit" data-inline="true" value="Submit" data-mini="true"></a>

        </form>
            </div>


    </div>

<!--search result page-->
    <div data-role="page" id="searchResultPage">
        <div id="header3" data-role="header">
        <h1>CrunchTime</h1>
            <span data-role="button" class="ui-btn ui-btn-right ui-corner-all ui-icon-bars ui-btn-icon-notext"style= "margin-top: 8px" onclick="menuContentShow()">Bars Icon</span>
            <ul class= "one" data-role="listview" data-inset="true">
                <li data-icon="false"><a href="#loginPage">Logout</a></li>
                <li data-icon="false"><a href="#homePage">Home</a></li>
                <li data-icon="false"><a href="#aboutUsPage">About Us</a></li>
            </ul>
        </div>
        <h3>Search Result</h3>
        <div class="ui-grid-x">

            <div class = "ui-block-a">
                <a href="#">
                    <img src="../www/img/burritoBowl.jpg" class="ui-li-thumb"></a><br>

                <span>Burrito Bowl<br> by <a href="#" >Chipotle</a></p></span>

            </div>
            <div class="ui-block-b"><a href="#">
                <img src="../www/img/taco.jpg" class="ui-li-thumb"></a>

                <span><p>Crispy Corn Tacos<br>by <a href="#">Taco Bell</a></p></span>

            </div>
            <div class ="ui-block-a"><a href="#">
                <img src="../www/img/salad.jpg" class="ui-li-thumb"></a><br>

                <span><p>Salad Bowl<br> Prepared by <a href="#">You</a></p></span>

            </div>
            <div class="ui-block-b"><a href="#">
                <img src="../www/img/burger.jpg" class="ui-li-thumb"></a>

                <span><p>Burger<br>by <a href="#">McDonalds</a></p></span>

            </div>
        </div>
    </div>

<!--about us page-->
    <div data-role="page" id="aboutUsPage">
        <div id= "header4" data-role="header">
        <h1>CrunchTime</h1>
            <span data-role="button" class="ui-btn ui-btn-right ui-corner-all ui-icon-bars ui-btn-icon-notext"style= "margin-top: 8px" onclick="menuContentShow()">Bars Icon</span>
            <ul class= "one" data-role="listview" data-inset="true">
                <li data-icon="false"><a href="#loginPage">Login</a></li>
                <li data-icon="false"><a href="#signUpPage">Register</a></li>
                <li data-icon="false"><a href="#homePage">Home</a></li>
            </ul>
        </div>
        <div data-role="main" content="ui-content">
            <h3>About Us</h3>

            <p>CrunchTime is for early stage professionals and graduate students who are short of time and need quick ideas to stay energized and productive. We gather food items and recipes which we recommend per your need.</p>
            <div data-role="main" content="ui-content">
                <div class="ui-grid-x">

                    <div class = "ui-block-a">
                            <img src="../www/img/2.jpg" class="ui-li-thumb"><br>
                            <span><p>Sonia Lin</p></span>
                    </div>
                    <div class="ui-block-b">
                        <img src="../www/img/1.jpg" class="ui-li-thumb">
                        <span><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Chingari Patel</p></span>
                    </div>
                    </div>


         </div>
</div>
</div>
</body>
</html>
